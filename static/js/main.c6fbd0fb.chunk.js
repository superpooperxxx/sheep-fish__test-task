(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{145:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(30),s=a.n(c),o=a(49),i=a(72),l=(a(145),a(14)),d=(a(146),a(2)),u=function(){return Object(d.jsx)("div",{children:"NotFoundPage"})},h=a(6),m=(a(148),function(e){var t=e.children;return Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("div",{className:"container modal__container",children:t})})}),j=n.a.memo((function(e){var t=e.showForm;return Object(d.jsxs)("header",{className:"products-page__header",children:[Object(d.jsx)("h1",{className:"products-page__title",children:"Products"}),Object(d.jsx)("button",{type:"button",className:"products-page__new-product",onClick:function(){return t(!0)},children:"New Product"})]})})),b=a(113),p=a(10),f=a(78),O=Object(f.b)({name:"products",initialState:[],reducers:{addMultiple:function(e,t){e.push.apply(e,Object(p.a)(t.payload))},addOne:function(e,t){e.push(t.payload)},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),_=O.reducer,x=O.actions,g=(a(150),n.a.memo((function(e){var t=e.title,a=e.errorMessage,r=e.touched,n=e.children;return Object(d.jsxs)("label",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:[t,a&&r&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:a})]}),n]})}))),N=a(58),w=N.b().shape({title:N.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),author:N.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),year:N.a(),rating:N.a().min(1,"Required").max(5)}),v=n.a.memo((function(e){var t=e.errorMessage,a=e.touched,r=e.rating,n=e.onChange;return Object(d.jsxs)("div",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:["Rating",t&&a&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:t})]}),Object(d.jsx)("div",{className:"new-product-form__stars new-product-form__stars--".concat(r),children:[1,2,3,4,5].map((function(e){return Object(d.jsx)("label",{className:"new-product-form__star",children:Object(d.jsx)("input",{className:"new-product-form__star-btn",type:"radio",name:"rating",value:e,onChange:n})},e)}))})]})})),y=function(e){var t=(new Date).getFullYear();return Array(e).fill(0).map((function(e,a){return t-a}))},C=n.a.memo((function(e){var t=e.errorMessage,a=e.touched,r=e.selectedYear,n=e.onChange;return Object(d.jsx)(g,{title:"Year",errorMessage:t,touched:a,children:Object(d.jsx)("select",{name:"year",className:"new-product-form__input new-product-form__years",value:r,onChange:n,children:y(15).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))})})}));function S(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return t&&(a.body=JSON.stringify(t),a.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch("https://dummyjson.com"+e,a).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var M=function(e){return S(e)},F=function(e,t){return S(e,"POST",t)},k=function(e){return S(e,"DELETE")},T=(a(151),a.p+"static/media/image__form-success.e39fa5f5.png"),P=function(e){var t=e.showForm;return Object(d.jsxs)("article",{className:"success-modal",children:[Object(d.jsx)("img",{className:"success-modal__img",src:T,alt:"showing that the form was submitted successfully"}),Object(d.jsx)("h3",{className:"success-modal__title",children:"The product was created!"}),Object(d.jsx)("button",{type:"button",className:"btn",onClick:function(){return t(!1)},children:"Back to products"})]})},A=function(e){var t=e.showForm,a=Object(o.b)(),n=Object(r.useState)(!1),c=Object(h.a)(n,2),s=c[0],i=c[1],u=Object(r.useState)(!1),m=Object(h.a)(u,2),j=m[0],p=m[1],f=Object(l.m)(),O=Object(b.a)({initialValues:{title:"",author:"",year:(new Date).getFullYear(),rating:0},validationSchema:w,onSubmit:function(e){p(!0),function(e){return F("/products/add",e)}({title:e.title,rating:+e.rating}).then((function(e){a(x.addOne(e)),i(!0)})).catch((function(){f("/not-found")})).finally((function(){p(!1)}))}}),_=O.values,N=O.errors,y=O.touched,S=O.handleChange,M=O.handleSubmit,k=O.handleBlur;return Object(d.jsx)(d.Fragment,{children:s?Object(d.jsx)(P,{showForm:t}):Object(d.jsxs)("form",{className:"new-product-form page__new-product-form",autoComplete:"off",onSubmit:M,children:[j&&Object(d.jsx)("div",{className:"new-product-form__loader","aria-label":"sending data",children:" "}),Object(d.jsxs)("div",{className:"new-product-form__header",children:[Object(d.jsx)("h2",{className:"new-product-form__title",children:"Add New Product"}),Object(d.jsx)("input",{type:"button",className:"new-product-form__close","aria-label":"click to close the form",onClick:function(){return t(!1)}})]}),Object(d.jsx)(g,{title:"Title",errorMessage:N.title,touched:y.title,children:Object(d.jsx)("input",{name:"title",type:"text",className:"new-product-form__input",placeholder:"Title",value:_.title,onChange:S,onBlur:k})}),Object(d.jsx)(g,{title:"Author",errorMessage:N.author,touched:y.author,children:Object(d.jsx)("input",{name:"author",type:"text",className:"new-product-form__input",placeholder:"Author",value:_.author,onChange:S,onBlur:k})}),Object(d.jsxs)("div",{className:"new-product-form__container",children:[Object(d.jsx)(C,{errorMessage:N.year,touched:y.year,selectedYear:_.year,onChange:S}),Object(d.jsx)(v,{errorMessage:N.rating,touched:y.rating,rating:_.rating,onChange:S})]}),Object(d.jsx)("button",{type:"submit",className:"btn new-product-form__submit",children:"Add New Product"})]})})},E=n.a.memo((function(){return Object(d.jsx)("form",{className:"products-page__form",children:Object(d.jsx)("label",{className:"products-page__search-label",children:Object(d.jsx)("div",{className:"products-page__search-container",children:Object(d.jsx)("input",{type:"text",className:"products-page__search",placeholder:"Search for a Product"})})})})})),D=a(94),R=a.n(D),q=a(209),B=a(210),Y=o.c,L=(a(152),a(153),function(){return Object(d.jsx)("div",{className:"loader"})}),J=n.a.memo((function(){var e=Object(r.useState)(!0),t=Object(h.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),s=Object(h.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)(null),m=Object(h.a)(u,2),j=m[0],b=m[1],p=Object(r.useState)(null),f=Object(h.a)(p,2),O=f[0],_=f[1],g=Object(r.useState)(0),N=Object(h.a)(g,2),w=N[0],v=N[1],y=Object(o.b)(),C=Y((function(e){return e.products})),S=function(){(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M("/products?limit=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,"&skip=").concat(e))})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).then((function(e){y(x.addMultiple(e.products)),_((function(t){return Number(t)+e.limit})),v(e.total)})).catch((function(){l("Oooops, something went wrong...")})).finally((function(){n(!1)}))};Object(r.useEffect)((function(){S()}),[]);var F=function(e){b(e),function(e){return k("/products/".concat(e))}(e).then((function(e){y(x.remove(e.id))})).catch((function(){alert("Something went wrong. Try to delete again !")})).finally((function(){b(null)}))},T=Object(r.useMemo)((function(){return[{field:"id",headerName:"ID",width:85,headerClassName:"products-table__table-head"},{field:"title",headerName:"Title",width:150,headerClassName:"products-table__table-head"},{field:"description",headerName:"Description",width:350,headerClassName:"products-table__table-head"},{field:"price",headerName:"Price",width:105,headerClassName:"products-table__table-head"},{field:"thumbnail",headerName:"Photo",width:80,headerClassName:"products-table__table-head",renderCell:function(e){return Object(d.jsx)(B.a,{src:e.row.thumbnail})},sortable:!1,filterable:!1},{field:"rating",headerName:"Rating",width:110,headerClassName:"products-table__table-head"},{field:"stock",headerName:"Stock",width:110,headerClassName:"products-table__table-head"},{field:"category",headerName:"Category",width:130,headerClassName:"products-table__table-head"},{field:"remove",headerName:"",width:80,headerClassName:"products-table__table-head",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(e){return Object(d.jsx)("input",{type:"button",className:R()("products-table__delete",{"products-table__delete--active":e.row.id===j}),onClick:function(){return F(e.row.id)}})}}]}),[j]);return Object(d.jsxs)(d.Fragment,{children:[i&&Object(d.jsx)("div",{className:"products-table__error-message",children:i}),O&&!i&&Object(d.jsx)("div",{className:"products-table",children:Object(d.jsx)(q.a,{autoHeight:!0,sx:{color:"#fff",border:"none",".MuiDataGrid-columnSeparator":{display:"none"}},rows:C,columns:T,hideFooterPagination:!0,hideFooterSelectedRowCount:!0})}),a&&Object(d.jsx)(L,{}),O!==w&&Object(d.jsx)("button",{type:"button",className:R()("btn products-table__load-more",{"products-table__load-more--loading":a}),onClick:function(){return n(!0),void S(30,Number(O))},children:i?"Try again":"Load more"})]})})),z=(a(157),function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),a=t[0],n=t[1];return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(m,{children:Object(d.jsx)(A,{showForm:n})}),Object(d.jsx)("div",{className:"products-page",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(j,{showForm:n}),Object(d.jsxs)("main",{className:"products-page__main",children:[Object(d.jsx)(E,{}),Object(d.jsx)(J,{})]})]})})]})}),G=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",element:Object(d.jsx)(z,{})}),Object(d.jsx)(l.a,{path:"*",element:Object(d.jsx)(u,{})})]})})},I=Object(f.a)({reducer:{products:_}});s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(o.a,{store:I,children:Object(d.jsx)(G,{})})})}),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.c6fbd0fb.chunk.js.map