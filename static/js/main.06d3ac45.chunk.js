(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{145:function(e,t,r){},146:function(e,t,r){},148:function(e,t,r){},149:function(e,t,r){},151:function(e,t,r){},152:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(30),o=r.n(c),s=r(56),l=r(91),i=(r(145),r(14)),d=(r(146),r(2)),u=function(){return Object(d.jsx)("div",{children:"NotFoundPage"})},h=r(6),m=(r(148),function(e){var t=e.children;return Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("div",{className:"container modal__container",children:t})})}),j=n.a.memo((function(e){var t=e.showForm;return Object(d.jsxs)("header",{className:"products-page__header",children:[Object(d.jsx)("h1",{className:"products-page__title",children:"Products"}),Object(d.jsx)("button",{type:"button",className:"products-page__new-product",onClick:function(){return t(!0)},children:"New Product"})]})})),b=r(113),p=(r(149),n.a.memo((function(e){var t=e.title,r=e.errorMessage,a=e.touched,n=e.children;return Object(d.jsxs)("label",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:[t,r&&a&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:r})]}),n]})}))),f=r(58),O=f.b().shape({title:f.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),author:f.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),year:f.a(),rating:f.a().min(1,"Required").max(5)}),_=n.a.memo((function(e){var t=e.errorMessage,r=e.touched,a=e.rating,n=e.onChange;return Object(d.jsxs)("div",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:["Rating",t&&r&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:t})]}),Object(d.jsx)("div",{className:"new-product-form__stars new-product-form__stars--".concat(a),children:[1,2,3,4,5].map((function(e){return Object(d.jsx)("label",{className:"new-product-form__star",children:Object(d.jsx)("input",{className:"new-product-form__star-btn",type:"radio",name:"rating",value:e,onChange:n})},e)}))})]})})),x=function(e){var t=(new Date).getFullYear();return Array(e).fill(0).map((function(e,r){return t-r}))},g=n.a.memo((function(e){var t=e.errorMessage,r=e.touched,a=e.selectedYear,n=e.onChange;return Object(d.jsx)(p,{title:"Year",errorMessage:t,touched:r,children:Object(d.jsx)("select",{name:"year",className:"new-product-form__input new-product-form__years",value:a,onChange:n,children:x(15).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))})})})),N=function(e){var t=e.showForm,r=Object(b.a)({initialValues:{title:"",author:"",year:(new Date).getFullYear(),rating:0},validationSchema:O,onSubmit:function(){window.console.log("Submitted"),t(!1)}}),a=r.values,n=r.errors,c=r.touched,o=r.handleChange,s=r.handleSubmit,l=r.handleBlur;return Object(d.jsxs)("form",{className:"new-product-form page__new-product-form",autoComplete:"off",onSubmit:s,children:[Object(d.jsxs)("div",{className:"new-product-form__header",children:[Object(d.jsx)("h2",{className:"new-product-form__title",children:"Add New Product"}),Object(d.jsx)("input",{type:"button",className:"new-product-form__close","aria-label":"click to close the form",onClick:function(){return t(!1)}})]}),Object(d.jsx)(p,{title:"Title",errorMessage:n.title,touched:c.title,children:Object(d.jsx)("input",{name:"title",type:"text",className:"new-product-form__input",placeholder:"Title",value:a.title,onChange:o,onBlur:l})}),Object(d.jsx)(p,{title:"Author",errorMessage:n.author,touched:c.author,children:Object(d.jsx)("input",{name:"author",type:"text",className:"new-product-form__input",placeholder:"Author",value:a.author,onChange:o,onBlur:l})}),Object(d.jsxs)("div",{className:"new-product-form__container",children:[Object(d.jsx)(g,{errorMessage:n.year,touched:c.year,selectedYear:a.year,onChange:o}),Object(d.jsx)(_,{errorMessage:n.rating,touched:c.rating,rating:a.rating,onChange:o})]}),Object(d.jsx)("button",{type:"submit",className:"new-product-form__send",children:"Add New Product"})]})},w=n.a.memo((function(){return Object(d.jsx)("form",{className:"products-page__form",children:Object(d.jsx)("label",{className:"products-page__search-label",children:Object(d.jsx)("div",{className:"products-page__search-container",children:Object(d.jsx)("input",{type:"text",className:"products-page__search",placeholder:"Search for a Product"})})})})})),v=r(93),y=r.n(v),C=r(208),S=r(209),M=s.c,k=r(10),F=r(78),P=Object(F.b)({name:"products",initialState:[],reducers:{addMultiple:function(e,t){e.push.apply(e,Object(k.a)(t.payload))},addOne:function(e,t){e.push(t.payload)},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),T=P.reducer,A=P.actions;function E(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return t&&(r.body=JSON.stringify(t),r.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch("https://dummyjson.com"+e,r).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var D=function(e){return E(e)},R=function(e){return E(e,"DELETE")},q=(r(151),r(152),function(){return Object(d.jsx)("div",{className:"loader"})}),Y=n.a.memo((function(){var e=Object(a.useState)(!0),t=Object(h.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),o=Object(h.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(null),m=Object(h.a)(u,2),j=m[0],b=m[1],p=Object(a.useState)(null),f=Object(h.a)(p,2),O=f[0],_=f[1],x=Object(a.useState)(0),g=Object(h.a)(x,2),N=g[0],w=g[1],v=Object(s.b)(),k=M((function(e){return e.products})),F=function(){(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return D("/products?limit=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,"&skip=").concat(e))})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).then((function(e){v(A.addMultiple(e.products)),n(!1),_((function(t){return Number(t)+e.limit})),w(e.total)})).catch((function(){i("Oooops, something went wrong..."),n(!1)}))};Object(a.useEffect)((function(){F()}),[]);var P=function(e){b(e),function(e){return R("/products/".concat(e))}(e).then((function(e){v(A.remove(e.id)),b(null)})).catch((function(){alert("Something went wrong. Try to delete again !")}))},T=Object(a.useMemo)((function(){return[{field:"id",headerName:"ID",width:85,headerClassName:"products-table__table-head"},{field:"title",headerName:"Title",width:150,headerClassName:"products-table__table-head"},{field:"description",headerName:"Description",width:350,headerClassName:"products-table__table-head"},{field:"price",headerName:"Price",width:105,headerClassName:"products-table__table-head"},{field:"thumbnail",headerName:"Photo",width:80,headerClassName:"products-table__table-head",renderCell:function(e){return Object(d.jsx)(S.a,{src:e.row.thumbnail})},sortable:!1,filterable:!1},{field:"rating",headerName:"Rating",width:110,headerClassName:"products-table__table-head"},{field:"stock",headerName:"Stock",width:110,headerClassName:"products-table__table-head"},{field:"category",headerName:"Category",width:130,headerClassName:"products-table__table-head"},{field:"remove",headerName:"",width:80,headerClassName:"products-table__table-head",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(e){return Object(d.jsx)("input",{type:"button",className:y()("products-table__delete",{"products-table__delete--active":e.row.id===j}),onClick:function(){return P(e.row.id)}})}}]}),[j]);return Object(d.jsxs)(d.Fragment,{children:[l&&Object(d.jsx)("div",{children:l}),O&&!l&&Object(d.jsx)("div",{className:"products-table",children:Object(d.jsx)(C.a,{autoHeight:!0,sx:{color:"#fff",border:"none",".MuiDataGrid-columnSeparator":{display:"none"}},rows:k,columns:T,hideFooterPagination:!0,hideFooterSelectedRowCount:!0})}),r&&Object(d.jsx)(q,{}),O!==N&&Object(d.jsx)("button",{type:"button",className:y()("products-table__load-more",{"products-table__load-more--loading":r}),onClick:function(){return n(!0),void F(30,Number(O))},children:"Load more"})]})})),B=(r(156),function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),r=t[0],n=t[1];return Object(d.jsxs)(d.Fragment,{children:[r&&Object(d.jsx)(m,{children:Object(d.jsx)(N,{showForm:n})}),Object(d.jsx)("div",{className:"products-page",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(j,{showForm:n}),Object(d.jsxs)("main",{className:"products-page__main",children:[Object(d.jsx)(w,{}),Object(d.jsx)(Y,{})]})]})})]})}),L=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(B,{})}),Object(d.jsx)(i.a,{path:"*",element:Object(d.jsx)(u,{})})]})})},J=Object(F.a)({reducer:{products:T}});o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(l.a,{children:Object(d.jsx)(s.a,{store:J,children:Object(d.jsx)(L,{})})})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.06d3ac45.chunk.js.map