(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{145:function(e,t,r){},146:function(e,t,r){},148:function(e,t,r){},150:function(e,t,r){},151:function(e,t,r){},152:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(30),o=r.n(c),s=r(49),i=r(91),l=(r(145),r(14)),d=(r(146),r(2)),u=function(){return Object(d.jsx)("div",{children:"NotFoundPage"})},h=r(6),m=(r(148),function(e){var t=e.children;return Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("div",{className:"container modal__container",children:t})})}),j=n.a.memo((function(e){var t=e.showForm;return Object(d.jsxs)("header",{className:"products-page__header",children:[Object(d.jsx)("h1",{className:"products-page__title",children:"Products"}),Object(d.jsx)("button",{type:"button",className:"products-page__new-product",onClick:function(){return t(!0)},children:"New Product"})]})})),b=r(113),p=r(10),f=r(77),O=Object(f.b)({name:"products",initialState:[],reducers:{addMultiple:function(e,t){e.push.apply(e,Object(p.a)(t.payload))},addOne:function(e,t){e.push(t.payload)},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),_=O.reducer,x=O.actions,g=(r(150),n.a.memo((function(e){var t=e.title,r=e.errorMessage,a=e.touched,n=e.children;return Object(d.jsxs)("label",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:[t,r&&a&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:r})]}),n]})}))),N=r(58),w=N.b().shape({title:N.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),author:N.c().matches(/^[A-Za-z]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),year:N.a(),rating:N.a().min(1,"Required").max(5)}),v=n.a.memo((function(e){var t=e.errorMessage,r=e.touched,a=e.rating,n=e.onChange;return Object(d.jsxs)("div",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:["Rating",t&&r&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:t})]}),Object(d.jsx)("div",{className:"new-product-form__stars new-product-form__stars--".concat(a),children:[1,2,3,4,5].map((function(e){return Object(d.jsx)("label",{className:"new-product-form__star",children:Object(d.jsx)("input",{className:"new-product-form__star-btn",type:"radio",name:"rating",value:e,onChange:n})},e)}))})]})})),y=function(e){var t=(new Date).getFullYear();return Array(e).fill(0).map((function(e,r){return t-r}))},C=n.a.memo((function(e){var t=e.errorMessage,r=e.touched,a=e.selectedYear,n=e.onChange;return Object(d.jsx)(g,{title:"Year",errorMessage:t,touched:r,children:Object(d.jsx)("select",{name:"year",className:"new-product-form__input new-product-form__years",value:a,onChange:n,children:y(15).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))})})}));function S(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return t&&(r.body=JSON.stringify(t),r.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch("https://dummyjson.com"+e,r).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var M=function(e){return S(e)},k=function(e,t){return S(e,"POST",t)},F=function(e){return S(e,"DELETE")},P=function(e){var t=e.showForm,r=Object(s.b)(),a=Object(b.a)({initialValues:{title:"",author:"",year:(new Date).getFullYear(),rating:0},validationSchema:w,onSubmit:function(e){(function(e){return k("/products/add",e)})({title:e.title,rating:+e.rating}).then((function(e){r(x.addOne(e))})).catch((function(e){return window.console.log(e)})),t(!1)}}),n=a.values,c=a.errors,o=a.touched,i=a.handleChange,l=a.handleSubmit,u=a.handleBlur;return Object(d.jsxs)("form",{className:"new-product-form page__new-product-form",autoComplete:"off",onSubmit:l,children:[Object(d.jsxs)("div",{className:"new-product-form__header",children:[Object(d.jsx)("h2",{className:"new-product-form__title",children:"Add New Product"}),Object(d.jsx)("input",{type:"button",className:"new-product-form__close","aria-label":"click to close the form",onClick:function(){return t(!1)}})]}),Object(d.jsx)(g,{title:"Title",errorMessage:c.title,touched:o.title,children:Object(d.jsx)("input",{name:"title",type:"text",className:"new-product-form__input",placeholder:"Title",value:n.title,onChange:i,onBlur:u})}),Object(d.jsx)(g,{title:"Author",errorMessage:c.author,touched:o.author,children:Object(d.jsx)("input",{name:"author",type:"text",className:"new-product-form__input",placeholder:"Author",value:n.author,onChange:i,onBlur:u})}),Object(d.jsxs)("div",{className:"new-product-form__container",children:[Object(d.jsx)(C,{errorMessage:c.year,touched:o.year,selectedYear:n.year,onChange:i}),Object(d.jsx)(v,{errorMessage:c.rating,touched:o.rating,rating:n.rating,onChange:i})]}),Object(d.jsx)("button",{type:"submit",className:"new-product-form__send",children:"Add New Product"})]})},T=n.a.memo((function(){return Object(d.jsx)("form",{className:"products-page__form",children:Object(d.jsx)("label",{className:"products-page__search-label",children:Object(d.jsx)("div",{className:"products-page__search-container",children:Object(d.jsx)("input",{type:"text",className:"products-page__search",placeholder:"Search for a Product"})})})})})),A=r(94),E=r.n(A),D=r(208),R=r(209),q=s.c,Y=(r(151),r(152),function(){return Object(d.jsx)("div",{className:"loader"})}),B=n.a.memo((function(){var e=Object(a.useState)(!0),t=Object(h.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),o=Object(h.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(null),m=Object(h.a)(u,2),j=m[0],b=m[1],p=Object(a.useState)(null),f=Object(h.a)(p,2),O=f[0],_=f[1],g=Object(a.useState)(0),N=Object(h.a)(g,2),w=N[0],v=N[1],y=Object(s.b)(),C=q((function(e){return e.products})),S=function(){(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M("/products?limit=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,"&skip=").concat(e))})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).then((function(e){y(x.addMultiple(e.products)),n(!1),_((function(t){return Number(t)+e.limit})),v(e.total)})).catch((function(){l("Oooops, something went wrong..."),n(!1)}))};Object(a.useEffect)((function(){S()}),[]);var k=function(e){b(e),function(e){return F("/products/".concat(e))}(e).then((function(e){y(x.remove(e.id)),b(null)})).catch((function(){alert("Something went wrong. Try to delete again !")}))},P=Object(a.useMemo)((function(){return[{field:"id",headerName:"ID",width:85,headerClassName:"products-table__table-head"},{field:"title",headerName:"Title",width:150,headerClassName:"products-table__table-head"},{field:"description",headerName:"Description",width:350,headerClassName:"products-table__table-head"},{field:"price",headerName:"Price",width:105,headerClassName:"products-table__table-head"},{field:"thumbnail",headerName:"Photo",width:80,headerClassName:"products-table__table-head",renderCell:function(e){return Object(d.jsx)(R.a,{src:e.row.thumbnail})},sortable:!1,filterable:!1},{field:"rating",headerName:"Rating",width:110,headerClassName:"products-table__table-head"},{field:"stock",headerName:"Stock",width:110,headerClassName:"products-table__table-head"},{field:"category",headerName:"Category",width:130,headerClassName:"products-table__table-head"},{field:"remove",headerName:"",width:80,headerClassName:"products-table__table-head",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(e){return Object(d.jsx)("input",{type:"button",className:E()("products-table__delete",{"products-table__delete--active":e.row.id===j}),onClick:function(){return k(e.row.id)}})}}]}),[j]);return Object(d.jsxs)(d.Fragment,{children:[i&&Object(d.jsx)("div",{className:"products-table__error-message",children:i}),O&&!i&&Object(d.jsx)("div",{className:"products-table",children:Object(d.jsx)(D.a,{autoHeight:!0,sx:{color:"#fff",border:"none",".MuiDataGrid-columnSeparator":{display:"none"}},rows:C,columns:P,hideFooterPagination:!0,hideFooterSelectedRowCount:!0})}),r&&Object(d.jsx)(Y,{}),O!==w&&Object(d.jsx)("button",{type:"button",className:E()("products-table__load-more",{"products-table__load-more--loading":r}),onClick:function(){return n(!0),void S(30,Number(O))},children:i?"Try again":"Load more"})]})})),L=(r(156),function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),r=t[0],n=t[1];return Object(d.jsxs)(d.Fragment,{children:[r&&Object(d.jsx)(m,{children:Object(d.jsx)(P,{showForm:n})}),Object(d.jsx)("div",{className:"products-page",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(j,{showForm:n}),Object(d.jsxs)("main",{className:"products-page__main",children:[Object(d.jsx)(T,{}),Object(d.jsx)(B,{})]})]})})]})}),J=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",element:Object(d.jsx)(L,{})}),Object(d.jsx)(l.a,{path:"*",element:Object(d.jsx)(u,{})})]})})},z=Object(f.a)({reducer:{products:_}});o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(s.a,{store:z,children:Object(d.jsx)(J,{})})})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.6f035370.chunk.js.map