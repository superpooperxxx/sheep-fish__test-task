(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{145:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(30),o=a.n(c),s=a(49),i=a(59),l=(a(145),a(14)),u=(a(146),a.p+"static/media/image__not-found.b7a45c84.png"),d=a(2),m=function(){var e=Object(l.m)();return Object(d.jsx)("main",{className:"not-found",children:Object(d.jsxs)("div",{className:"container not-found__container",children:[Object(d.jsx)("img",{className:"not-found__img",src:u,alt:"not found illustration"}),Object(d.jsx)("button",{type:"button",className:"btn",onClick:function(){return e("/")},children:"Home Page"})]})})},h=a(6),j=(a(148),function(e){var t=e.children;return Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("div",{className:"container modal__container",children:t})})}),b=n.a.memo((function(e){var t=e.showForm;return Object(d.jsxs)("header",{className:"products-page__header",children:[Object(d.jsx)("h1",{className:"products-page__title",children:"Products"}),Object(d.jsx)("button",{type:"button",className:"products-page__new-product",onClick:function(){return t(!0)},children:"New Product"})]})})),p=a(113),f=a(10),O=a(79),_=Object(O.b)({name:"products",initialState:[],reducers:{addMultiple:function(e,t){e.push.apply(e,Object(f.a)(t.payload))},addOne:function(e,t){e.push(t.payload)},remove:function(e,t){return e.filter((function(e){return e.id!==t.payload}))}}}),x=_.reducer,g=_.actions,N=(a(150),n.a.memo((function(e){var t=e.title,a=e.errorMessage,r=e.touched,n=e.children;return Object(d.jsxs)("label",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:[t,a&&r&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:a})]}),n]})}))),w=a(58),v=w.b().shape({title:w.c().matches(/^[A-Za-z\u0410-\u044f\u0430-\u044f]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),author:w.c().matches(/^[A-Za-z\u0410-\u044f\u0430-\u044f]+$/,"Letters only").min(3,"Min 3 letters").max(30,"Max 30 letters").required("Required"),year:w.a(),rating:w.a().min(1,"Required").max(5)}),y=n.a.memo((function(e){var t=e.errorMessage,a=e.touched,r=e.rating,n=e.onChange;return Object(d.jsxs)("div",{className:"new-product-form__label",children:[Object(d.jsxs)("span",{className:"new-product-form__label-text",children:["Rating",t&&a&&Object(d.jsx)("span",{className:"new-product-form__error-message",children:t})]}),Object(d.jsx)("div",{className:"new-product-form__stars new-product-form__stars--".concat(r),children:[1,2,3,4,5].map((function(e){return Object(d.jsx)("label",{className:"new-product-form__star",children:Object(d.jsx)("input",{className:"new-product-form__star-btn",type:"radio",name:"rating",value:e,onChange:n})},e)}))})]})})),C=function(e){var t=(new Date).getFullYear();return Array(e).fill(0).map((function(e,a){return t-a}))},S=n.a.memo((function(e){var t=e.errorMessage,a=e.touched,r=e.selectedYear,n=e.onChange;return Object(d.jsx)(N,{title:"Year",errorMessage:t,touched:a,children:Object(d.jsx)("select",{name:"year",className:"new-product-form__input new-product-form__years",value:r,onChange:n,children:C(15).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))})})}));function M(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return t&&(a.body=JSON.stringify(t),a.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch("https://dummyjson.com"+e,a).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var k=function(e){return M(e)},F=function(e,t){return M(e,"POST",t)},T=function(e){return M(e,"DELETE")},P=(a(151),a.p+"static/media/image__form-success.e39fa5f5.png"),q=function(e){var t=e.showForm;return Object(d.jsxs)("article",{className:"success-modal",children:[Object(d.jsx)("img",{className:"success-modal__img",src:P,alt:"showing that the form was submitted successfully"}),Object(d.jsx)("h3",{className:"success-modal__title",children:"The product was created!"}),Object(d.jsx)("button",{type:"button",className:"btn",onClick:function(){return t(!1)},children:"Back to products"})]})},A=function(e){var t=e.showForm,a=Object(s.b)(),n=Object(r.useState)(!1),c=Object(h.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)(!1),m=Object(h.a)(u,2),j=m[0],b=m[1],f=Object(l.m)(),O=Object(p.a)({initialValues:{title:"",author:"",year:(new Date).getFullYear(),rating:0},validationSchema:v,onSubmit:function(e){b(!0),function(e){return F("/products/add",e)}({title:e.title,rating:+e.rating}).then((function(e){a(g.addOne(e)),i(!0)})).catch((function(){f("/not-found")})).finally((function(){b(!1)}))}}),_=O.values,x=O.errors,w=O.touched,C=O.handleChange,M=O.handleSubmit,k=O.handleBlur;return Object(d.jsx)(d.Fragment,{children:o?Object(d.jsx)(q,{showForm:t}):Object(d.jsxs)("form",{className:"new-product-form page__new-product-form",autoComplete:"off",onSubmit:M,children:[j&&Object(d.jsx)("div",{className:"new-product-form__loader","aria-label":"sending data",children:" "}),Object(d.jsxs)("div",{className:"new-product-form__header",children:[Object(d.jsx)("h2",{className:"new-product-form__title",children:"Add New Product"}),Object(d.jsx)("input",{type:"button",className:"new-product-form__close","aria-label":"click to close the form",onClick:function(){return t(!1)}})]}),Object(d.jsx)(N,{title:"Title",errorMessage:x.title,touched:w.title,children:Object(d.jsx)("input",{name:"title",type:"text",className:"new-product-form__input",placeholder:"Title",value:_.title,onChange:C,onBlur:k})}),Object(d.jsx)(N,{title:"Author",errorMessage:x.author,touched:w.author,children:Object(d.jsx)("input",{name:"author",type:"text",className:"new-product-form__input",placeholder:"Author",value:_.author,onChange:C,onBlur:k})}),Object(d.jsxs)("div",{className:"new-product-form__container",children:[Object(d.jsx)(S,{errorMessage:x.year,touched:w.year,selectedYear:_.year,onChange:C}),Object(d.jsx)(y,{errorMessage:x.rating,touched:w.rating,rating:_.rating,onChange:C})]}),Object(d.jsx)("button",{type:"submit",className:"btn new-product-form__submit",children:"Add New Product"})]})})},E=n.a.memo((function(e){var t=e.query,a=e.setQuery;return Object(d.jsx)("form",{className:"products-page__form",children:Object(d.jsx)("label",{className:"products-page__search-label",children:Object(d.jsx)("div",{className:"products-page__search-container",children:Object(d.jsx)("input",{type:"text",className:"products-page__search",placeholder:"Search for a Product",value:t,onChange:function(e){return a(e.target.value)}})})})})})),L=a(94),D=a.n(L),R=a(209),B=a(210),Y=s.c,J=(a(152),a(153),function(){return Object(d.jsx)("div",{className:"loader"})}),z=n.a.memo((function(e){var t=e.query,a=Object(r.useState)(!0),n=Object(h.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(""),l=Object(h.a)(i,2),u=l[0],m=l[1],j=Object(r.useState)(null),b=Object(h.a)(j,2),p=b[0],f=b[1],O=Object(r.useState)(null),_=Object(h.a)(O,2),x=_[0],N=_[1],w=Object(r.useState)(0),v=Object(h.a)(w,2),y=v[0],C=v[1],S=Object(s.b)(),M=Y((function(e){return e.products})),F=function(){(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return k("/products?limit=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,"&skip=").concat(e))})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).then((function(e){S(g.addMultiple(e.products)),N((function(t){return Number(t)+e.limit})),C(e.total)})).catch((function(){m("Oooops, something went wrong...")})).finally((function(){o(!1)}))};Object(r.useEffect)((function(){F()}),[]);var P=function(e){f(e),function(e){return T("/products/".concat(e))}(e).then((function(e){S(g.remove(e.id))})).catch((function(){alert("Something went wrong. Try to delete again !")})).finally((function(){f(null)}))},q=Object(r.useMemo)((function(){return[{field:"id",headerName:"ID",width:85,headerClassName:"products-table__table-head"},{field:"title",headerName:"Title",width:150,headerClassName:"products-table__table-head"},{field:"description",headerName:"Description",width:350,headerClassName:"products-table__table-head"},{field:"price",headerName:"Price",width:105,headerClassName:"products-table__table-head"},{field:"thumbnail",headerName:"Photo",width:80,headerClassName:"products-table__table-head",renderCell:function(e){return Object(d.jsx)(B.a,{src:e.row.thumbnail})},sortable:!1,filterable:!1},{field:"rating",headerName:"Rating",width:110,headerClassName:"products-table__table-head"},{field:"stock",headerName:"Stock",width:110,headerClassName:"products-table__table-head"},{field:"category",headerName:"Category",width:130,headerClassName:"products-table__table-head"},{field:"remove",headerName:"",width:80,headerClassName:"products-table__table-head",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(e){return Object(d.jsx)("input",{type:"button",className:D()("products-table__delete",{"products-table__delete--active":e.row.id===p}),onClick:function(){return P(e.row.id)}})}}]}),[p]),A=Object(r.useMemo)((function(){return M.filter((function(e){var a=e.title.toLowerCase(),r=e.category.toLowerCase(),n=t.toLowerCase();return a.includes(n)||r.includes(n)}))}),[t,x]);return Object(d.jsxs)(d.Fragment,{children:[u&&Object(d.jsx)("div",{className:"products-table__error-message",children:u}),x&&!u&&Object(d.jsx)("div",{className:"products-table",children:Object(d.jsx)(R.a,{autoHeight:!0,sx:{color:"#fff",border:"none",".MuiDataGrid-columnSeparator":{display:"none"}},rows:A,columns:q,hideFooterPagination:!0,hideFooterSelectedRowCount:!0})}),c&&Object(d.jsx)(J,{}),x!==y&&Object(d.jsx)("button",{type:"button",className:D()("btn products-table__load-more",{"products-table__load-more--loading":c}),onClick:function(){return o(!0),void F(30,Number(x))},children:u?"Try again":"Load more"})]})})),G=(a(157),function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),o=Object(h.a)(c,2),s=o[0],i=o[1];return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(j,{children:Object(d.jsx)(A,{showForm:n})}),Object(d.jsx)("div",{className:"products-page",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(b,{showForm:n}),Object(d.jsxs)("main",{className:"products-page__main",children:[Object(d.jsx)(E,{query:s,setQuery:i}),Object(d.jsx)(z,{query:s})]})]})})]})}),H=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",element:Object(d.jsx)(G,{})}),Object(d.jsx)(l.a,{path:"*",element:Object(d.jsx)(m,{})})]})})},I=Object(O.a)({reducer:{products:x}});o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(s.a,{store:I,children:Object(d.jsx)(H,{})})})}),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.c764c3fe.chunk.js.map